# 《校园食光》修改说明
## 一、核心框架优化（新旧版最关键差异，全局架构调整）
1. #### 调整「页面共用逻辑」：

   管理员与学生共用全站页面（首页/社区/商户页等），仅多「工作台」入口，替代旧版管理员独立后台页面——解决旧版页面割裂、切换繁琐的问题，降低管理员学习成本，同时减少独立页面开发维护工作量，贴合轻量化运营需求。

2. #### 升级「层级架构」：

   新增“学校→商户（1-N级）→档口”多层级路径，替代旧版“学校→食堂→档口”单一架构——适配多校多层级商户场景（如学校内多个独立美食广场、商户下设二级美食区），满足复杂运营组织需求。

3. #### 新增「库存双模式」：

   在旧版“设置份数”模式基础上，补充“不设置份数”模式（默认在售，手动标记售罄）——解决旧版仅支持限量菜品的局限，适配家常菜、米饭等无明确库存限制的菜品，减少管理员不必要的库存维护操作。

4. #### 新增「管理员身份控制体系」：

   含“身份标签设置（3个固定选项+自定义备注）+ 身份展示全局开关 + 单条互动勾选”——解决旧版管理员身份无标识或强制显示的问题，支持管理员自主选择身份显隐，平衡官方互动透明性与个人社交隐私。

5. #### 优化「权限管控架构」：

   新增“可视化层级树+精准权限勾选+自定义职位名”，替代旧版单一权限绑定——支持各层级管理员新增/调整下级、指定管控单元（如商户管理员仅管控某2个档口），实现精细化权限分配，适配不同层级管理需求。

## 二、全局入口层优化（基于旧版基础调整，无虚构功能）
1. #### 细化「管理员认证逻辑」：

   将旧版“工号+档口权限绑定”升级为“工号+平台/学校/商户/档口层级绑定”——匹配新版分层级工作台，确保不同层级管理员登录后自动跳转对应后台，明确权限边界。

2. #### 新增「管理员首次登录引导」：

   补充“工作台入口+身份设置”指引，旧版仅含学生引导——帮助管理员快速熟悉核心操作入口，降低上手门槛，提升运营效率。

3. #### 新增「高校手动切换功能」：

   在旧版IP/学号段自动路由基础上，补充下拉选择切换——解决旧版跨校访问、校外登录时识别失效的问题，保障多校场景下的基础使用体验。

## 三、学生用户主路径优化（功能增删改均对应新旧差异）
### 1. 首页（/home）
1. #### 替换「导航核心」：

   将旧版“食堂快捷导航”升级为“食堂/商户快捷导航”，新增“校园地图按钮”——适配新版商户层级架构，同时满足学生快速查找位置的需求，替代旧版独立地图页，减少操作层级。

2. #### 移除「独立地图页跳转」：

   旧版好友动态点击跳转地图页，新版好友动态直接关联商户/菜品——避免无关页面跳转，简化操作链路，提升内容消费效率。

### 2. 商户详情页（替代旧版食堂详情页）
1. #### 扩展「信息展示维度」：

   新增商户层级路径（如“学校A→美食广场→一楼”）、设施标签细化（如“无障碍通道”“充电口”）——适配多层级商户场景，让学生清晰知晓商户组织关系，同时覆盖更多细分需求。

2. #### 优化「档口列表交互」：

   保留Tab切换（全部/营业中/收藏），新增档口卡片“主营品类”标识——帮助学生快速定位目标档口，提升查找效率。

### 3. 档口菜单页（/stall/:id）
1. #### 调整「库存展示逻辑」：

   按双模式区分展示——“设置份数”模式保留红色高亮+进度条，“不设置份数”模式仅显示“在售/售罄”文字标签——让库存信息更贴合不同菜品类型，避免信息冗余，提升学生决策效率。

2. #### 移除「菜品详情弹窗管理员编辑入口」：

   所有菜品编辑统一迁移至管理员工作台——避免旧版权限混淆（如误触编辑按钮），规范管理操作流程，保障数据安全。

### 4. 个人中心页（/profile）
1. #### 升级「我的足迹功能」：

   保留文字列表，新增“地图可视化切换”——还原旧版地图核心价值，同时避免独立地图页的割裂感，让学生可灵活查看打卡点位，提升用户体验。

2. #### 适配「管理员专属模块」：

   在学生功能基础上，新增“身份标签设置”“身份展示开关”“进入工作台”入口——不影响学生功能使用，同时满足管理员核心操作需求，实现页面复用。

### 5. 社区页（/community）
1. #### 优化「动态卡片展示」：

   管理员动态支持身份标签显隐（按设置规则），学生动态无标签——解决旧版管理员与学生动态无区分的问题，既保障官方互动的辨识度，又不破坏社区平等氛围。

2. #### 调整「发布弹窗功能」：

   新增“身份展示勾选框”，优先级高于全局开关——支持管理员单条动态自主控制身份显隐，适配“官方宣传显身份、个人打卡隐身份”的差异化需求。

## 四、管理员路径优化（分层级重构，无虚构模块）
1. #### 重构「工作台架构」：

   新增超级/学校/商户/档口四级独立工作台，替代旧版统一后台入口——每个层级仅显示对应管理功能（如档口管理员仅能操作菜品库存、评价回复），避免信息冗余，提升管理效率。

2. #### 新增「快捷操作功能」：

   补充“扫码快编（手机端调用相机）”“批量设置库存模式”——旧版仅支持Excel批量导入，新增功能适配移动端高频操作场景，减少管理员重复劳动。

3. #### 新增「权限可视化模块」：

   各层级工作台补充“我的权限”页面，清晰展示管控单元+可操作功能——解决旧版管理员权限不明确的问题，降低误操作风险，同时方便权限交接。

4. #### 移除「旧版冗余模块」：

   删除旧版数据分析页“竞争分析（本校食堂对比）”——聚焦本层级管理数据，避免无关信息干扰，让管理员更专注核心运营工作。

## 五、核心规则优化（匹配架构调整，无额外新增）
1. #### 新增「身份展示规则」：

   明确“全局开关＞单条勾选”优先级，隐藏身份时管理员与学生完全一致，后台可追溯操作——平衡隐私与合规，既保障管理员社交自由，又避免违规操作无法追溯。

2. #### 新增「库存规则」：

   明确“设置份数（限量菜品）”“不设置份数（常规菜品，默认在售）”的适用场景与展示标准——统一操作与展示逻辑，降低管理员学习成本，同时让学生清晰识别库存状态。

3. #### 优化「权限隔离规则」：

   明确“上级覆盖下级、同级无交叉、仅可管控同层级/下级”的铁律——适配新版层级架构，避免权限混乱，保障多校多层级运营的有序性。